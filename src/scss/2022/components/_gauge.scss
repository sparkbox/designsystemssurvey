@use "../tools/typography";
@use "../tools/fills";
@use "../tools/svg" as img;

.cmp-gauge {
  --gauge-value: 0;

  &__value {
    position: relative;
    padding-bottom: 100%;
    
    @supports (aspect-ratio: 1 / 1) {
      padding-bottom: 0;
      aspect-ratio: 1 / 1;
    }
  }
  
  &__value::before {
    --percent: calc(var(--gauge-value) / 100);
    --deg: calc(360deg * var(--percent));
    content: '';
    display: block;
    pointer-events: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
      fills.dots(white, 6, 0.5) repeat fixed,
      conic-gradient(
        currentcolor 0deg,
        currentcolor var(--deg),
        transparent var(--deg)) no-repeat;
    mask-image: img.svg('<svg height="10" width="10" viewBox="0 0 10 10" fill="none"><circle cx="5" cy="5" stroke="#000" stroke-width="0.75" r="4.5" /></svg>');
    mask-size: contain;
  }
  
  &__percent {
    @include typography.number('medium');
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  &__title {
    @include typography.style('body-default');
    text-align: center;
    margin-top: var(--space-md);
  }
}